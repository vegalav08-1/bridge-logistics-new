# ‚ö° –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Bridge ERP

## üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **Frontend**: –°—Ä–µ–¥–Ω—è—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (LCP: ~2.5s, CLS: 0.1)
- **Backend**: –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å—Ä–µ–¥–Ω–∏–π –æ—Ç–≤–µ—Ç: ~200ms)
- **Database**: –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è (SQLite, –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- **File Storage**: –•–æ—Ä–æ—à–∞—è (MinIO/S3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

## üîç –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1.1 –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è Next.js
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–º–ø–∏–ª—è—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞–Ω–∏–º–∞–µ—Ç 30+ —Å–µ–∫—É–Ω–¥
```
‚úì Compiled /shipments in 33.9s (717 modules)
‚úì Compiled / in 11.8s (745 modules)
```

**–ü—Ä–∏—á–∏–Ω—ã**:
- –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π (700+)
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webpack –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã (tree shaking)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dynamic imports –¥–ª—è –±–æ–ª—å—à–∏—Ö –º–æ–¥—É–ª–µ–π

#### 1.2 N+1 –∑–∞–ø—Ä–æ—Å—ã –≤ API
**–§–∞–π–ª**: `apps/web/src/app/api/shipments/route.ts`
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
```typescript
// –ü–†–û–ë–õ–ï–ú–ê: N+1 –∑–∞–ø—Ä–æ—Å—ã
const userChats = await prisma.chatMember.findMany({
  include: {
    chat: {
      include: {
        members: { include: { user: true } },
        messages: { include: { author: true } }
      }
    }
  }
});
```

**–†–µ—à–µ–Ω–∏–µ**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ include

### 2. –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 2.1 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- –§–∏—á–µ-—Ñ–ª–∞–≥–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –î–æ–±–∞–≤–∏—Ç—å Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å in-memory –∫—ç—à –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Next.js –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 2.2 –ù–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ù–µ—Ç —Å–∂–∞—Ç–∏—è
- –ù–µ—Ç lazy loading
- –ù–µ—Ç responsive images

**–†–µ—à–µ–Ω–∏–µ**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Next.js Image optimization

### 3. –ú–µ–ª–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 3.1 –ë–æ–ª—å—à–∏–µ bundle —Ä–∞–∑–º–µ—Ä—ã
**–ü—Ä–æ–±–ª–µ–º–∞**: –ë–æ–ª—å—à–∏–µ JavaScript bundles
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ code splitting
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

#### 3.2 –ù–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
```typescript
// –ü–†–û–ë–õ–ï–ú–ê: –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–ª—è –≤ select
select: {
  id: true,
  email: true,
  role: true,
  // ... –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π
}
```

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1-2 –¥–Ω—è)

#### Frontend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```typescript
// 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã
import { specificFunction } from 'large-library';
// –≤–º–µ—Å—Ç–æ
import * as library from 'large-library';

// 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dynamic imports
const HeavyComponent = dynamic(() => import('./HeavyComponent'), {
  loading: () => <Skeleton />
});

// 3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
import Image from 'next/image';
<Image src="/image.jpg" width={300} height={200} alt="..." />
```

#### Backend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```typescript
// 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Prisma –∑–∞–ø—Ä–æ—Å—ã
const chats = await prisma.chat.findMany({
  where: { /* —É—Å–ª–æ–≤–∏—è */ },
  select: {
    id: true,
    number: true,
    status: true,
    // –¢–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
  },
  take: 20, // –õ–∏–º–∏—Ç
  orderBy: { updatedAt: 'desc' }
});

// 2. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
// –í schema.prisma
@@index([updatedAt])
@@index([status, updatedAt])
```

### 2. –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)

#### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
```typescript
// 1. Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
import Redis from 'ioredis';
const redis = new Redis(process.env.REDIS_URL);

// –ö—ç—à –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const getCachedUser = async (userId: string) => {
  const cached = await redis.get(`user:${userId}`);
  if (cached) return JSON.parse(cached);
  
  const user = await prisma.user.findUnique({ where: { id: userId } });
  await redis.setex(`user:${userId}`, 3600, JSON.stringify(user));
  return user;
};
```

#### Database –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```sql
-- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
CREATE INDEX idx_chat_status_updated ON Chat(status, updatedAt);
CREATE INDEX idx_message_chat_seq ON Message(chatId, seq);
CREATE INDEX idx_notification_user_read ON Notification(userId, isRead);
```

### 3. –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1-2 –º–µ—Å—è—Ü–∞)

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã**: –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- **CDN**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- **Load Balancing**: –î–æ–±–∞–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏
- **Monitoring**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å APM (Application Performance Monitoring)

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- **First Contentful Paint (FCP)**: ~1.2s
- **Largest Contentful Paint (LCP)**: ~2.5s
- **Cumulative Layout Shift (CLS)**: 0.1
- **First Input Delay (FID)**: ~100ms
- **Time to Interactive (TTI)**: ~3.0s

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **FCP**: <1.0s
- **LCP**: <2.0s
- **CLS**: <0.1
- **FID**: <50ms
- **TTI**: <2.0s

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **Lighthouse**: –ê—É–¥–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **WebPageTest**: –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- **Chrome DevTools**: –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Next.js Analytics**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **Sentry**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```typescript
// 1. Next.js Analytics
import { Analytics } from '@vercel/analytics/react';

// 2. Performance monitoring
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';

function sendToAnalytics(metric) {
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
  console.log(metric);
}

getCLS(sendToAnalytics);
getFID(sendToAnalytics);
getFCP(sendToAnalytics);
getLCP(sendToAnalytics);
getTTFB(sendToAnalytics);
```

## üéØ –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ù–µ–¥–µ–ª—è 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã –∏ bundle —Ä–∞–∑–º–µ—Ä
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å N+1 –∑–∞–ø—Ä–æ—Å—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–µ–¥–µ–ª—è 2-3: –°—Ä–µ–¥–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è  
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å database –∏–Ω–¥–µ–∫—Å—ã

### –ú–µ—Å—è—Ü 2: –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- [ ] –í–Ω–µ–¥—Ä–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CDN –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
