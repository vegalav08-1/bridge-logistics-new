# Sprint S14: –°–∫–ª–∞–¥, —É–ø–∞–∫–æ–≤–∫–∞ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞ - –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –§–∏—á–µ-—Ñ–ª–∞–≥–∏
- ‚úÖ `INVENTORY_V2_ENABLED = true` - —Å–∫–ª–∞–¥ / –æ—Å—Ç–∞—Ç–∫–∏
- ‚úÖ `PACKING_V2_ENABLED = true` - —É–ø–∞–∫–æ–≤–∫–∞
- ‚úÖ `LABELS_V2_ENABLED = true` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç—Ç–∏–∫–µ—Ç–æ–∫ (QR/–®–ö)

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ `src/lib/inventory/` - –º–æ–¥—É–ª—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- ‚úÖ `src/app/inventory/` - —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–∫–ª–∞–¥–∞
- ‚úÖ `src/components/inventory/` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ `src/app/api/audit/ui/inventory/` - API –∞—É–¥–∏—Ç–∞

### 3. –¢–∏–ø—ã –∏ —Å—Ö–µ–º—ã (`src/lib/inventory/types.ts`)
- ‚úÖ `Unit` - –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (pcs, kg, m, set)
- ‚úÖ `Location` - —Å–∫–ª–∞–¥—Å–∫–∏–µ –ª–æ–∫–∞—Ü–∏–∏ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π
- ‚úÖ `Item` - –ø–æ–∑–∏—Ü–∏–∏ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ `Package` - —É–ø–∞–∫–æ–≤–∫–∏ —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- ‚úÖ `InventoryAudit` - –∞—É–¥–∏—Ç —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ `LabelFormat` - —Ñ–æ—Ä–º–∞—Ç—ã —ç—Ç–∏–∫–µ—Ç–æ–∫ (QR, BARCODE)

### 4. –°—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (`src/lib/inventory/schema.ts`)
- ‚úÖ `itemSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ `packageSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —É–ø–∞–∫–æ–≤–æ–∫
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è

### 5. API –∑–∞–≥–ª—É—à–∫–∏ (`src/lib/inventory/api.ts`)
- ‚úÖ `listItems()` - —Å–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ `listLocations()` - —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞—Ü–∏–π
- ‚úÖ `createPackage()` - —Å–æ–∑–¥–∞–Ω–∏–µ —É–ø–∞–∫–æ–≤–∫–∏
- ‚úÖ `updateStock()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
- ‚úÖ `generateLabel()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç—Ç–∏–∫–µ—Ç–æ–∫

### 6. React —Ö—É–∫–∏
- ‚úÖ `useInventory()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–æ–º
- ‚úÖ `usePacking()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–ø–∞–∫–æ–≤–∫–æ–π
- ‚úÖ `useLabels()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç—Ç–∏–∫–µ—Ç–æ–∫
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 7. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ `ItemCard` - –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ `InventoryList` - —Å–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ `PackingPanel` - –ø–∞–Ω–µ–ª—å —É–ø–∞–∫–æ–≤–∫–∏ –≤ —á–∞—Ç–µ
- ‚úÖ `PackageCard` - –∫–∞—Ä—Ç–æ—á–∫–∞ —É–ø–∞–∫–æ–≤–∫–∏
- ‚úÖ `LabelButton` - –∫–Ω–æ–ø–∫–∞ –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫

### 8. –°—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ `/inventory` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∫–ª–∞–¥–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ –æ—Å—Ç–∞—Ç–∫–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ACL —Å–∏—Å—Ç–µ–º–æ–π

### 9. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —á–∞—Ç
- ‚úÖ `PackingPanel` –≤ `/chat/[chatId]`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —É–ø–∞–∫–æ–≤–æ–∫
- ‚úÖ –ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫ QR/–®–ö
- ‚úÖ ACL –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 10. API –º–∞—Ä—à—Ä—É—Ç—ã –∞—É–¥–∏—Ç–∞
- ‚úÖ `/api/audit/ui/inventory` - –∞—É–¥–∏—Ç —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ `auditInventory()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –∞—É–¥–∏—Ç–∞
- ‚úÖ `navigator.sendBeacon` –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

### 11. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- ‚úÖ ACL (S10) - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∫–ª–∞–¥—É
- ‚úÖ FSM (S11) - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–∞—à–∏–Ω–æ–π —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ Finance (S13) - —É—á–µ—Ç –≤–µ—Å–∞ –∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏
- ‚úÖ UI1-UI11 - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–æ–π

## üéØ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –°–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç
- **–ü–æ–∑–∏—Ü–∏–∏ –∏ –æ—Å—Ç–∞—Ç–∫–∏** —Å SKU, –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏, –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- **–õ–æ–∫–∞—Ü–∏–∏** —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π (–∑–æ–Ω–∞ ‚Üí —Å—Ç–µ–ª–ª–∞–∂ ‚Üí –ø–æ–ª–∫–∞ ‚Üí —è—á–µ–π–∫–∞)
- **–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–¥ –∑–∞–∫–∞–∑—ã
- **–ê—É–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–π** (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, —É–ø–∞–∫–æ–≤–∫–∞, –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)

### –£–ø–∞–∫–æ–≤–∫–∞ –∏ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞
- **–°–æ–∑–¥–∞–Ω–∏–µ —É–ø–∞–∫–æ–≤–æ–∫** —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞–º–∏
- **–°—Ç–∞—Ç—É—Å—ã —É–ø–∞–∫–æ–≤–æ–∫** (DRAFT, PACKED, SHIPPED, RETURNED)
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç—Ç–∏–∫–µ—Ç–æ–∫** QR-–∫–æ–¥–æ–≤ –∏ —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤
- **–ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫** —Å –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–≥–∏—Å—Ç–∏–∫–æ–π
- **–°–≤—è–∑—å —Å –æ—Ç–≥—Ä—É–∑–∫–∞–º–∏** —á–µ—Ä–µ–∑ shipmentId
- **–£—á–µ—Ç –≤–µ—Å–∞ –∏ –æ–±—ä–µ–º–∞** —É–ø–∞–∫–æ–≤–æ–∫
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å FSM** –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
- **–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∏

### ACL –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤** –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —É–ø–∞–∫–æ–≤–æ–∫
- **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (USER, ADMIN, SUPER)
- **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—Ç–∫–∞–∑–∞** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –ø—Ä–∞–≤
- **–ê—É–¥–∏—Ç –¥–æ—Å—Ç—É–ø–∞** –∫ —Å–∫–ª–∞–¥—Å–∫–∏–º –æ–ø–µ—Ä–∞—Ü–∏—è–º

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (14 —Ñ–∞–π–ª–æ–≤)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏—á–µ-—Ñ–ª–∞–≥–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ —á–∞—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ API –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/inventory` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü–∞–Ω–µ–ª—å —É–ø–∞–∫–æ–≤–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ —á–∞—Ç
- ‚úÖ ACL –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/lib/inventory/
‚îú‚îÄ‚îÄ types.ts              # –¢–∏–ø—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
‚îú‚îÄ‚îÄ schema.ts             # Zod —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ api.ts                # API –∑–∞–≥–ª—É—à–∫–∏
‚îú‚îÄ‚îÄ useInventory.ts       # –•—É–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º
‚îú‚îÄ‚îÄ usePacking.ts         # –•—É–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–ø–∞–∫–æ–≤–∫–æ–π
‚îú‚îÄ‚îÄ useLabels.ts          # –•—É–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫
‚îî‚îÄ‚îÄ audit.ts             # –ê—É–¥–∏—Ç —Å–æ–±—ã—Ç–∏–π

src/app/inventory/
‚îú‚îÄ‚îÄ page.tsx              # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∫–ª–∞–¥–∞
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ InventoryList.tsx # –°–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π
    ‚îî‚îÄ‚îÄ ItemCard.tsx      # –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∑–∏—Ü–∏–∏

src/app/chat/[chatId]/components/
‚îú‚îÄ‚îÄ PackingPanel.tsx      # –ü–∞–Ω–µ–ª—å —É–ø–∞–∫–æ–≤–∫–∏
‚îú‚îÄ‚îÄ PackageCard.tsx       # –ö–∞—Ä—Ç–æ—á–∫–∞ —É–ø–∞–∫–æ–≤–∫–∏
‚îî‚îÄ‚îÄ LabelButton.tsx       # –ö–Ω–æ–ø–∫–∞ –ø–µ—á–∞—Ç–∏

src/app/api/audit/ui/inventory/
‚îî‚îÄ‚îÄ route.ts              # API –∞—É–¥–∏—Ç–∞
```

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

Inventory —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é Sprint S14 –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- **–°–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç** —Å –ø–æ–∑–∏—Ü–∏—è–º–∏, –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –∏ –ª–æ–∫–∞—Ü–∏—è–º–∏
- **–£–ø–∞–∫–æ–≤–∫–∞ –∏ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞** —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —ç—Ç–∏–∫–µ—Ç–æ–∫
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–≥–∏—Å—Ç–∏–∫–æ–π** —á–µ—Ä–µ–∑ FSM –∏ —Ñ–∏–Ω–∞–Ω—Å—ã
- **ACL –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –¥–ª—è —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ê—É–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–π** —Å –ø–æ–ª–Ω—ã–º —Ç—Ä–µ–∫–∏–Ω–≥–æ–º
- **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å UI1-UI11 –∏ S10-S13

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: —É—á–µ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ —É–ø–∞–∫–æ–≤–æ–∫, –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —ç—Ç–∏–∫–µ—Ç–æ–∫, –ø–µ—á–∞—Ç—å QR/—à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤, ACL –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Å—Ç–∏–∫–∏.


