# üìù –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ @mentions –≤ Composer

## ‚úÖ **–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

### 1. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç MentionAutocomplete** 
- **–§–∞–π–ª:** `apps/web/src/app/chat/[chatId]/components/MentionAutocomplete.tsx`
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç —Å –ø–æ–∏—Å–∫–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∞–º–∏ (‚Üë‚Üì)
  - –í—ã–±–æ—Ä Enter –∏–ª–∏ –∫–ª–∏–∫
  - –ó–∞–∫—Ä—ã—Ç–∏–µ Escape
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 2. **–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å mentions**
- **–§–∞–π–ª:** `apps/web/src/lib/mentions/utils.ts`
- **–§—É–Ω–∫—Ü–∏–∏:**
  - `extractMentions()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ @mentions –∏–∑ —Ç–µ–∫—Å—Ç–∞
  - `isAtMentionPosition()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞
  - `getMentionQuery()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ—Å–ª–µ @
  - `replaceMention()` - –∑–∞–º–µ–Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ —Ç–µ–∫—Å—Ç–µ

### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Composer**
- **–§–∞–π–ª:** `apps/web/src/app/chat/[chatId]/components/Composer.tsx`
- **–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
  - ‚úÖ **–ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –ø—Ä–∏ –≤–≤–æ–¥–µ @**
  - ‚úÖ **–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
  - ‚úÖ **–í—Å—Ç–∞–≤–∫–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –≤ —Ç–µ–∫—Å—Ç**
  - ‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ mentions –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ**
  - ‚úÖ **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è**
  - ‚úÖ **–ó–∞–∫—Ä—ã—Ç–∏–µ –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–∞**

## üéØ **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

### **1. –í–≤–æ–¥ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è:**
1. –ù–∞—á–Ω–∏—Ç–µ –ø–µ—á–∞—Ç–∞—Ç—å `@` –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
2. –ü–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–µ–ª–∫–∏ ‚Üë‚Üì –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
4. –ù–∞–∂–º–∏—Ç–µ Enter –∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞

### **2. –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –í–≤–µ–¥–∏—Ç–µ `@–∏–≤–∞–Ω` - –Ω–∞–π–¥–µ—Ç "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
- –í–≤–µ–¥–∏—Ç–µ `@–∞–¥–º–∏–Ω` - –Ω–∞–π–¥–µ—Ç "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
- –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é

### **3. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:**
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ mentions –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ì–æ—Ç–æ–≤—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **Mock –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
```typescript
const mentionUsers: MentionUser[] = [
  { id: 'user1', name: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤', avatar: undefined },
  { id: 'user2', name: '–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞', avatar: undefined },
  { id: 'user3', name: '–ê–ª–µ–∫—Å–µ–π –ö–æ–∑–ª–æ–≤', avatar: undefined },
  { id: 'admin1', name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä', avatar: undefined },
];
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:**
- **onChange** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞ –∏ @
- **onKeyDown** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
- **onSelect** - –≤—Å—Ç–∞–≤–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **onClose** - –∑–∞–∫—Ä—ã—Ç–∏–µ –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–∞

### **–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤—ã—à–µ –ø–æ–ª—è –≤–≤–æ–¥–∞
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ textarea
- Z-index 50 –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**

### **‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- [x] –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –ø—Ä–∏ –≤–≤–æ–¥–µ @
- [x] –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [x] –í—Å—Ç–∞–≤–∫–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π
- [x] –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- [x] –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ mentions –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
- [x] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

### **üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º API** - –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–∏
3. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ** - –ø–æ–¥—Å–≤–µ—Ç–∫–∞ @mentions –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
4. **–ò—Å—Ç–æ—Ä–∏—è —É–ø–æ–º–∏–Ω–∞–Ω–∏–π** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–¥–∞–≤–Ω–∏—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π

## üì± **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
- Touch-friendly –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üé® **UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è/—Å–∫—Ä—ã—Ç–∏—è
- –í—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª @mentions –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –Ω–∏–∂–Ω–µ–µ –æ–∫–Ω–æ –≤–≤–æ–¥–∞ (Composer) –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!



